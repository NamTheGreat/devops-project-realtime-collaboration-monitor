# nagios.cfg — Nagios monitoring configuration for the Git Collaboration Monitor.
# Monitors backend health, Redis connectivity, and frontend availability.

# ============================================================
# Host Definitions
# ============================================================

define host {
    use                     linux-server
    host_name               git-monitor-backend
    alias                   Backend API Server
    address                 backend
    max_check_attempts      3
    check_interval          1
    retry_interval          1
    notification_interval   5
    notification_period     24x7
    contact_groups          admins
}

define host {
    use                     linux-server
    host_name               git-monitor-redis
    alias                   Redis Cache Server
    address                 redis
    max_check_attempts      3
    check_interval          1
    retry_interval          1
    notification_interval   5
    notification_period     24x7
    contact_groups          admins
}

define host {
    use                     linux-server
    host_name               git-monitor-frontend
    alias                   Frontend Dashboard
    address                 frontend
    max_check_attempts      3
    check_interval          1
    retry_interval          1
    notification_interval   5
    notification_period     24x7
    contact_groups          admins
}

# ============================================================
# Service Definitions
# ============================================================

# Backend Health Check — GET / must return HTTP 200
define service {
    use                     generic-service
    host_name               git-monitor-backend
    service_description     Backend Health Check
    check_command           check_http!-p 8000 -u / -e 200
    max_check_attempts      3
    check_interval          1
    retry_interval          1
    notification_interval   2
    notification_period     24x7
    contact_groups          admins
}

# Redis Connectivity — TCP ping on port 6379
define service {
    use                     generic-service
    host_name               git-monitor-redis
    service_description     Redis Connectivity
    check_command           check_tcp!6379
    max_check_attempts      3
    check_interval          1
    retry_interval          1
    notification_interval   2
    notification_period     24x7
    contact_groups          admins
}

# Frontend Availability — GET / on port 80
define service {
    use                     generic-service
    host_name               git-monitor-frontend
    service_description     Frontend Availability
    check_command           check_http!-p 80 -u / -e 200
    max_check_attempts      3
    check_interval          1
    retry_interval          1
    notification_interval   2
    notification_period     24x7
    contact_groups          admins
}
